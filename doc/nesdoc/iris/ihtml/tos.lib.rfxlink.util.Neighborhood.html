<html>
  <head>
    <LINK rel="stylesheet" href="nesdoc.css" type="text/css" media="screen"><title>Interface: tos.lib.rfxlink.util.Neighborhood</title>
  </head>
  <body>
    <h2>Interface: tos.lib.rfxlink.util.Neighborhood</h2>
    <b>interface Neighborhood</b><p>
 Every component maintains its own neighborhood data. The Neighboorhood
 component maintains only the nodeids and ages of the neighbors, and
 evicts old entries from the table when necessary.

    <p><p><div id=heading>Commands</div><div id=funcsig><span id=funcnameshort>command uint8_t <a href="#getAge">getAge</a>(uint8_t idx)
      </span><menu>
 Returns the age of the given entry.
      </menu>
    </div><div id=funcsig><span id=funcnameshort>command uint8_t <a href="#getIndex">getIndex</a>(am_addr_t id)
      </span><menu>
 Returns the index of the neighbor in the table.
      </menu>
    </div><div id=funcsig><span id=funcnameshort>command am_addr_t <a href="#getNode">getNode</a>(uint8_t idx)
      </span><menu>
 Returns the node address for the given entry.
      </menu>
    </div><div id=funcsig><span id=funcnameshort>command uint8_t <a href="#insertNode">insertNode</a>(am_addr_t id)
      </span><menu>
 Adds a new node into the neighborhood table.
      </menu>
    </div><p><div id=heading>Events</div><div id=funcsig><span id=funcnameshort>event void <a href="#evicted">evicted</a>(uint8_t idx)
      </span><menu>
 This event is fired when the oldest entry is replaced with a new
 node.
      </menu>
    </div><p><div id=heading>Commands - Details</div>
    <a name="getAge"></a>
    <h4>getAge
    </h4>
    <span id=funcnameshort>command uint8_t <b>getAge</b>(uint8_t idx)
    </span>
    <p>
    <menu>
      
 Returns the age of the given entry. The age is incremented by one
 every time a new node is inserted into the neighborhood table that
 is not already at the very end. If the age would get too large to
 fit into a byte, then it is periodically reset to a smaller value.

    </menu>
    <hr>
    <a name="getIndex"></a>
    <h4>getIndex
    </h4>
    <span id=funcnameshort>command uint8_t <b>getIndex</b>(am_addr_t id)
    </span>
    <p>
    <menu>
      
 Returns the index of the neighbor in the table. If the node was not 
 found in the table, then the value NEIGHBORHOOD is  returned, 
 otherwise an index in the range [0, NEIGHBORHOOD-1] is returned.

    </menu>
    <hr>
    <a name="getNode"></a>
    <h4>getNode
    </h4>
    <span id=funcnameshort>command am_addr_t <b>getNode</b>(uint8_t idx)
    </span>
    <p>
    <menu>
      
 Returns the node address for the given entry.
    </menu>
    <hr>
    <a name="insertNode"></a>
    <h4>insertNode
    </h4>
    <span id=funcnameshort>command uint8_t <b>insertNode</b>(am_addr_t id)
    </span>
    <p>
    <menu>
      
 Adds a new node into the neighborhood table. If this node was already
 in the table, then it is just brought to the front (its age is reset
 to zero). If the node was not in the table, then the oldest is evicted
 and its entry is replaced with this node. The index of the entry
 is returned in the range [0, NEIGHBORHOOD-1]. 

    </menu>
    <p><div id=heading>Events - Details</div>
    <a name="evicted"></a>
    <h4>evicted
    </h4>
    <span id=funcnameshort>event void <b>evicted</b>(uint8_t idx)
    </span>
    <p>
    <menu>
      
 This event is fired when the oldest entry is replaced with a new
 node. The same interface is used by many users, so all of them
 will receive this event and can clear the corresponding entry.
 After this event is fired, all flags for this entry are cleared
 (see the NeighborhoodFlag interface)

    </menu>
  </body>
</html>
